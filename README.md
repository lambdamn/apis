# Ez-Connector

** Table of Contents **

[TOC]


## 1. Танилцуулга
Кассын системийг **Ez-Connector** санг ашиглан Изи Пэй постой холболт хийх зааварчилгааг агуулсан.
## 1.1. Sequence Diagram

```seq
Client->EzConnector.dll: Гүйлгээний хүсэлт
EzConnector.dll->Ezpay POS: Гүйлгээний хүсэлт
Note right of Ezpay POS: Төлбөр төлөлт\nхийгдэнэ 
Ezpay POS->EzConnector.dll: Гүйлгээний хүсэлтийн\nхариу 
EzConnector.dll->Client: Гүйлгээний хүсэлтийн\nхариу 
```

## 1.2. Гүйлгээ хийх

```
string doPayment(double amount)
```
### 1.2.1. Гүйлгээ хийхэд шаардлагатай параметрүүд

| Параметр     | Төрөл   | Тайлбар            |
| ------------ | ------- | -------------      |
| amount       | double  | Гүйлгээ хийх дүн   |

### 1.2.2. Гүйлгээний хүсэлтийн хариу

Гүйлгээний хүсэлтийн хариуд ирж байгаа `string` утга нь `json` форматтай байх ба дараах бүтэцтэй байна.

| Attribute    | Төрөл  | Тайлбар                               | Заавал |
| ------------: | ------ | :------ | ---------------------------------------|
| `succeed`      |boolean |Хүсэлт амжилттай болсон эсэх   |  Тийм  |
| `message`      | string |Хүсэлт амжилтгүй үед алдааг илэрхийлэх тайлбар   |  Тийм  |
| `amount`       | double |Гүйлгээ хийсэн дүн    | Үгүй   |
| `payment`      | string |Гүйлгээ хийгдсэн төлбөрийн хэрэгсэл| Үгүй   |
| `systemRef`    | string |Гүйлгээний ref дугаар| Үгүй   |
| `traceno`      | string |Гүйлгээний trace дугаар| Үгүй   |
| `approveCode`  | string |Зөвшөөрлийн код| Үгүй   |
| `maskedPAN`    | string |Картын маскалсан дугаар||
| `transactionAt`| string |Гүйлгээ хийгдсэн огноо|~|
| `merchantId`   | string |Мерчант дугаар| Үгүй   |
| `terminalId`   | string |Терминал дугаар| Үгүй   |

